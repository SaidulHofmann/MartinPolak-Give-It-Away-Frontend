<h3>Artikel Details</h3>
<div class="mb-3">
  <button type="button" class="btn btn-outline-primary" (click)="onGoBack()">Zurück</button>
</div>
  <div class="card">
  <div class="row">
    <div class="col-md-6">

      <div class="card">
        <div class="card-header">
          <h4>{{ article.name }}</h4>
        </div>
        <div class="card-body">
          <div *ngIf="article.additionalImages && article.additionalImages.length > 0; else noAdditionalImagesTemplate">
            <div id="picture-carousel" class="carousel slide" #pictureCarousel>
              <ol class="carousel-indicators">
                <div *ngFor="let picture of article.additionalImages; let i = index">
                  <li  data-target="#picture-carousel" data-slide-to="i" [ngClass]="{'active': i===0}"></li>
                </div>
              </ol>
              <div class="carousel-inner">
                <div *ngFor="let picture of article.additionalImages; let i = index" class="carousel-item"  [ngClass]="{'active': i === 0}">
                  <img class="d-block w-100" src="{{imageUrlBackend}}/{{article._id}}/{{picture}}" alt="Slide">
                </div>
              </div>
              <a class="carousel-control-prev" href="#picture-carousel" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
              </a>
              <a class="carousel-control-next" href="#picture-carousel" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
              </a>
            </div>
          </div>
        </div>
        <ng-template #noAdditionalImagesTemplate>
          <img class="d-block w-100" [src]="articleDetailsSvc.getFallbackImage()" alt="Slide">
        </ng-template>
      </div>

    </div>

    <div class="col-md-6">

      <div class="card">
        <div class="card-header">
          Artikel Beschreibung
        </div>
        <div class="card-body">
          {{ article.description }}
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          Übergabe
        </div>
        <div class="card-body">
          {{ article.handover }}
        </div>
      </div>

      <div class="card mb-3">
        <div class="card-header">
          Artikel Reservation
        </div>

        <div class="card-body">
          <div class="alert" [ngClass]="{
            'alert-success': article.status._id === ArticleStatusType.available,
            'alert-warning': article.status._id === ArticleStatusType.handoverPending,
            'alert-info': article.status._id === ArticleStatusType.donated}">{{articleDetailsSvc.getArticleDonationStatusText()}}
          </div>

          <div *ngIf="currentUser._id !== article.publisher._id; else publisherTemplate">
            <div>Wieso sollen Sie diesen Artikel erhalten ?</div>
            <textarea [(ngModel)]="article.usersReservation.commentApplicant" rows="4" class="form-control mt-1 mb-3"
                      placeholder="Bitte eine kurze Begründung, weshalb der Artikel Ihnen geschenkt werden soll.">
              </textarea>
            Kommentar des Publizierenden
            <textarea readonly [(ngModel)]="article.usersReservation.commentPublisher" rows="4" class="form-control mt-1"></textarea>

            <div *ngIf="!article.userHasReservation && !(currentUser._id === article.publisher._id)">
              <button type="button" class="btn btn-success mt-3" (click)="onCreateReservation()">Artikel reservieren</button>
            </div>
            <div *ngIf="article.userHasReservation && article.status._id !== ArticleStatusType.donated">
              <button type="button" class="btn btn-info mt-3 mr-2" (click)="onUpdateReservation()">
                <i class="fa fa-commenting-o mr-2" aria-hidden="true"></i>Kommentar speichern</button>
              <button type="button" class="btn btn-danger mt-3" (click)="onDeleteReservation()">
                <i class="fa fa-trash fa-lg mr-2"></i>Reservation aufheben</button>
            </div>
          </div>

          <ng-template #publisherTemplate>
            <br/>
            <button *ngIf="article.status._id !== ArticleStatusType.donated" [disabled]="!authService.canDonateOwnArticle" class="btn btn-info btn-sm mt-2 mr-2"
                    (click)="navService.gotoArticleGiveAwayPage(article._id)"><i class="fa fa-gift fa-lg mr-2"></i>Reservationen</button>
          </ng-template>

        </div>
      </div>

    </div>

  </div>

</div>
